(function(tocify){"use strict";tocify(window.jQuery,window,document);}
(function($,window,document,undefined){"use strict";$.widget("toc.tocify",{version:"1.5.0",options:{context:"body",ignoreSelector:null,selectors:"h1, h2, h3",hashGenerator:"pretty",},_create:function(){var self=this;self.items=[];self._generateToc();self.webkit=(function(){for(var prop in window){if(prop){if(prop.toLowerCase().indexOf("webkit")!==-1){return true;}}}
return false;}());},_generateToc:function(){var self=this,firstElem,li,ignoreSelector=self.options.ignoreSelector;if(this.options.selectors.indexOf(",")!==-1){firstElem=$(this.options.context).find(this.options.selectors.replace(/ /g,"").substr(0,this.options.selectors.indexOf(",")));}else{firstElem=$(this.options.context).find(this.options.selectors.replace(/ /g,""));}
firstElem.each(function(index){if($(this).is(ignoreSelector)){return;}
li=self._nestElements($(this),index);self.element.append(li);$(this).nextUntil(this.nodeName.toLowerCase()).each(function(){if($(this).find(self.options.selectors).length===0){$(this).filter(self.options.selectors).each(function(){if($(this).is(ignoreSelector)){return;}
self._appendSubheaders.call(this,self,li);});}else{$(this).find(self.options.selectors).each(function(){if($(this).is(ignoreSelector)){return;}
self._appendSubheaders.call(this,self,li);});}});});},_nestElements:function(self,index){var arr,item,hashValue;arr=$.grep(this.items,function(item){return item===self.text();});if(arr.length){this.items.push(self.text()+ index);}else{this.items.push(self.text());}
hashValue=this._generateHashValue(arr,self,index);item=$("<li/>").append($("<a/>",{"text":self.text(),"href":"#"+ hashValue}));self.before($("<a/>",{id:hashValue,class:"anchor-link"}));return item;},_generateHashValue:function(arr,self,index){var hashValue="",hashGeneratorOption=this.options.hashGenerator;if(hashGeneratorOption==="pretty"){hashValue=self.text().toLowerCase().replace(/\s/g,"-");while(hashValue.indexOf("--")>-1){hashValue=hashValue.replace(/--/g,"-");}
while(hashValue.indexOf(":-")>-1){hashValue=hashValue.replace(/:-/g,"-");}}else if(typeof hashGeneratorOption==="function"){hashValue=hashGeneratorOption(self.text(),self);}else{hashValue=self.text().replace(/\s/g,"");}
if(arr.length){hashValue+=""+index;}
return hashValue;},_appendSubheaders:function(self,ul){var index=$(this).index(self.options.selectors),previousHeader=$(self.options.selectors).eq(index- 1),currentTagName=+$(this).prop("tagName").charAt(1),previousTagName=+previousHeader.prop("tagName").charAt(1),lastSubheader;if(currentTagName<previousTagName){self.element.find("li").last().append(self._nestElements($(this),index));}
else if(currentTagName===previousTagName){ul.find("li").last().after(self._nestElements($(this),index));}else{ul.append($("<ul/>",{class:"nav"}).append(self._nestElements($(this),index)));}},setOption:function(){$.Widget.prototype._setOption.apply(this,arguments);},setOptions:function(){$.Widget.prototype._setOptions.apply(this,arguments);},});}));